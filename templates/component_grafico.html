<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Componente – Gráfico</title>
  <style>
    :root{
      --accent:#e45700ff;
      --ink:#434343;      /* Títulos */
      --muted:#666666;    /* Párrafos */
      --bar-bg:#eeeeee;
    }
    *{box-sizing:border-box}
    body{ margin:0; background:#fff; }

    /* ---- Contenedor requerido ---- */
    .comp-wrap{
      width:90%;
      height:500px;
      margin:16px auto;
      border:1px solid #e9e9e9;
      border-radius:12px;
      overflow:hidden;
      display:grid;
      grid-template-rows: 1fr 8px;
      grid-template-areas:
        "content"
        "prog";
      background:#fff;
      box-shadow: 0 4px 18px rgba(0,0,0,.06);
    }

    /* Contenido scrollable (título + párrafo + gráfico) */
    .content{
      grid-area:content;
      height:100%;
      overflow:auto;
      padding:20px 22px 18px;
    }

    h1{
      margin:6px 0 12px;
      font:700 26px Arial, Helvetica, sans-serif;
      color:var(--ink);
    }

    .intro{
      margin:0 0 14px;
      font:400 12px "Proxima Nova","ProximaNova",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      color:var(--muted);
      line-height:1.65;
    }

    .media{
      width:100%;
      min-height:260px;
      height:340px;
      border-radius:6px;
      border:1px solid #e1e1e1;
      background:#c5c7cc;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#ffffff;
      font:600 14px Arial, Helvetica, sans-serif;
      user-select:none;
    }
    .media img, .media iframe, .media video{
      width:100%;
      height:100%;
      object-fit:contain;
      border:0;
      border-radius:6px;
      background:#ddd;
      box-shadow:0 2px 12px rgba(0,0,0,.1);
    }

    /* Barra de progreso */
    .progress{ grid-area:prog; height:8px; background:var(--bar-bg); position:relative; }
    .progress .bar{ position:absolute; inset:0 auto 0 0; width:0%; background:var(--accent); transition:width .25s ease; }
  </style>
</head>
<body>
  <!-- Cambia el id para identificar este HTML en tu orquestador -->
  <section class="comp-wrap" data-component-id="chart-001">
    <div class="content" id="scroll">
      <!-- ====== EDITA TU CONTENIDO AQUÍ ====== -->
      <h1>Gráfico</h1>
      <p class="intro">
        Este es el cuerpo del componente gráfico. Puedes introducir tu gráfico
        o simplemente dejar que hable por sí solo. El componente puede ser simple o extendido.
      </p>

      <!-- Reemplaza este bloque por <img>, <video> o <iframe> a tu gráfico -->
      <div class="media" id="media">
        Área del gráfico (coloca aquí una imagen, un iframe con tu dashboard o un video)
      </div>

      <!-- Espaciador para permitir desplazamiento y probar la barra -->
      <div style="height:240px"></div>
    </div>

    <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
  </section>

  <script>
    (function(){
      const wrap = document.querySelector('.comp-wrap');
      const scroller = document.getElementById('scroll');
      const bar = document.getElementById('bar');
      const id = wrap.getAttribute('data-component-id') || 'chart-component';

      function tick(){
        const max = Math.max(1, scroller.scrollHeight - scroller.clientHeight);
        const pct = Math.round((scroller.scrollTop / max) * 100);
        bar.style.width = pct + '%';

        // Notificar al padre (orquestador)
        try{
          window.parent && window.parent.postMessage({
            type: 'componentProgress',
            componentId: id,
            progress: pct,
            completed: pct >= 95
          }, '*');
        }catch(e){/* no-op */}
      }

      scroller.addEventListener('scroll', tick, {passive:true});
      window.addEventListener('load', tick);
    })();
  </script>
</body>
</html>
