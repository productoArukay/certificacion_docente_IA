<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Componente – Texto Izquierda</title>
  <style>
    :root{
      --accent:#e45700ff;
      --ink:#434343;      /* Títulos */
      --muted:#666666;    /* Párrafos */
      --bar-bg:#eeeeee;
    }
    *{box-sizing:border-box}
    body{ margin:0; background:#fff; }

    /* ---- Contenedor requerido ---- */
    .comp-wrap{
      width:90%;
      height:500px;
      margin:16px auto;
      border:1px solid #e9e9e9;
      border-radius:12px;
      overflow:hidden;
      display:grid;
      grid-template-rows: 1fr 8px;
      grid-template-areas:
        "content"
        "prog";
      background:#fff;
      box-shadow: 0 4px 18px rgba(0,0,0,.06);
    }

    /* Lienzo interno con mucho espacio a la derecha (look del ejemplo) */
    .canvas{
      grid-area:content;
      width:100%;
      height:100%;
      display:flex;
      align-items:flex-start;
      justify-content:flex-start;
      padding:24px;
      overflow:hidden;
    }

    /* Tarjeta de texto a la izquierda */
    .text-card{
      width:min(520px, 100%);
      background:#eeeeee;
      border:1px solid #e3e3e3;
      border-radius:4px;
      padding:22px 24px 20px;
      overflow:auto; /* scroll interno */
      color:var(--muted);
      font:400 12px "Proxima Nova","ProximaNova",system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      line-height:1.65;
      box-shadow: inset 0 1px 3px rgba(0,0,0,.04);
    }

    .text-card h1{
      margin:0 0 10px;
      font:700 26px Arial, Helvetica, sans-serif;
      color:var(--ink);
    }

    .text-card h2{
      margin:4px 0 12px;
      font:700 14px Arial, Helvetica, sans-serif;
      color:var(--accent);
    }

    .text-card p{ margin:0 0 12px; }

    /* Barra de progreso */
    .progress{ grid-area:prog; height:8px; background:var(--bar-bg); position:relative; }
    .progress .bar{ position:absolute; inset:0 auto 0 0; width:0%; background:var(--accent); transition:width .25s ease; }

    /* Responsive */
    @media (max-width:720px){
      .canvas{ padding:12px; }
      .text-card{ width:100%; border-radius:8px; }
    }
  </style>
</head>
<body>
  <!-- Cambia el id para identificar este HTML en tu orquestador -->
  <section class="comp-wrap" data-component-id="txt-001">
    <div class="canvas">
      <!-- ====== EDITA SOLO EL CONTENIDO DE .text-card ====== -->
      <article class="text-card" id="card">
        <h1>Texto</h1>
        <h2>Componente de texto</h2>
        <p>El componente de texto simple suele ser la mejor opción para transmitir información cuando no necesitas elementos multimedia.</p>
        <p>Este bloque aparece a la izquierda y deja espacio en blanco a la derecha. Reemplaza los párrafos por tu propio contenido.</p>
        <p>Tipografías/colores: títulos <strong>Arial 26 #434343</strong>, subtítulos <strong>Arial 14 bold #e45700</strong>, párrafos <strong>Proxima Nova 12 #666666</strong>.</p>
        <p>Haz scroll dentro de esta tarjeta para que la barra inferior complete el 100% y el progreso sea reportado al orquestador.</p>
        <div style="height:360px"></div>
      </article>
    </div>

    <div class="progress" aria-hidden="true"><div class="bar" id="bar"></div></div>
  </section>

  <script>
    (function(){
      const wrap = document.querySelector('.comp-wrap');
      const card = document.getElementById('card');
      const bar = document.getElementById('bar');
      const id = wrap.getAttribute('data-component-id') || 'text-component';

      function tick(){
        const max = Math.max(1, card.scrollHeight - card.clientHeight);
        const pct = Math.round((card.scrollTop / max) * 100);
        bar.style.width = pct + '%';

        // Notificar al padre (orquestador)
        try{
          window.parent && window.parent.postMessage({
            type: 'componentProgress',
            componentId: id,
            progress: pct,
            completed: pct >= 95
          }, '*');
        }catch(e){/* no-op */}
      }

      card.addEventListener('scroll', tick, {passive:true});
      window.addEventListener('load', tick);
    })();
  </script>
</body>
</html>
